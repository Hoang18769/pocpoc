"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(home)/layout",{

/***/ "(app-pages-browser)/./src/hooks/useMessageNotification.js":
/*!*********************************************!*\
  !*** ./src/hooks/useMessageNotification.js ***!
  \*********************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ useMessageNotification; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_socket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/socket */ \"(app-pages-browser)/./src/utils/socket.js\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-hot-toast */ \"(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* harmony import */ var _store_ZustandStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/store/ZustandStore */ \"(app-pages-browser)/./src/store/ZustandStore.js\");\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\nfunction useMessageNotification(userId) {\n    _s();\n    const subscriptionRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const isSubscribedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_5__.useRouter)();\n    // Store actions\n    const { fetchChatList, onMessageReceived, onChatCreated, selectChat } = (0,_store_ZustandStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n    // Hàm helper để cập nhật chatList\n    const updateChatList = (newMessage, chatId)=>{\n        console.log(\"\\uD83D\\uDD04 Processing message for chatList:\", newMessage);\n        const { chatList } = _store_ZustandStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getState();\n        console.log(\"\\uD83D\\uDCDC Current chatList:\", chatList);\n        const foundChat = chatList.find((c)=>c.chatId === chatId);\n        if (foundChat) {\n            const updatedChat = {\n                ...foundChat,\n                latestMessage: {\n                    id: newMessage.id,\n                    content: newMessage.content,\n                    sentAt: newMessage.sentAt,\n                    sender: newMessage.sender,\n                    messageType: newMessage.messageType,\n                    attachment: newMessage.attachment,\n                    attachments: newMessage.attachments,\n                    deleted: newMessage.deleted || false\n                },\n                updatedAt: newMessage.sentAt,\n                notReadMessageCount: (foundChat.notReadMessageCount || 0) + (newMessage.isOwnMessage ? 0 : 1)\n            };\n            const otherChats = chatList.filter((c)=>c.chatId !== chatId);\n            const newChatList = [\n                ...otherChats,\n                updatedChat\n            ].sort((a, b)=>new Date(b.updatedAt).getTime() - new Date(a.updatedAt).getTime());\n            _store_ZustandStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"].setState({\n                chatList: newChatList.map((chat)=>({\n                        ...chat\n                    }))\n            });\n            console.log(\"✅ ChatList updated successfully!\");\n        } else {\n            console.warn(\"⚠️ Kh\\xf4ng t\\xecm thấy chat với chatId: \".concat(chatId));\n        }\n    };\n    // Message handler\n    const handleMessage = async (messageData)=>{\n        if (!messageData) return;\n        console.log(\"\\uD83D\\uDCE8 New message received:\", messageData);\n        try {\n            var _messageData_sender;\n            // Lấy currentUserId từ localStorage khi cần\n            const currentUserId = localStorage.getItem(\"userId\");\n            // Command xử lý riêng\n            if (messageData.command === \"DELETE\") {\n                (0,react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast)(\"\\uD83D\\uDDD1️ Tin nhắn đ\\xe3 bị x\\xf3a\", {\n                    duration: 3000,\n                    position: \"top-right\"\n                });\n                return;\n            }\n            if (messageData.command === \"EDIT\") {\n                var _messageData_sender1, _messageData_sender2, _messageData_sender3;\n                const senderName = ((_messageData_sender1 = messageData.sender) === null || _messageData_sender1 === void 0 ? void 0 : _messageData_sender1.username) || ((_messageData_sender2 = messageData.sender) === null || _messageData_sender2 === void 0 ? void 0 : _messageData_sender2.givenName) || \"ai đ\\xf3\";\n                if (((_messageData_sender3 = messageData.sender) === null || _messageData_sender3 === void 0 ? void 0 : _messageData_sender3.id) !== currentUserId) {\n                    (0,react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast)(\"✏️ \".concat(senderName, \" đ\\xe3 chỉnh sửa tin nhắn\"), {\n                        duration: 3000,\n                        position: \"top-right\"\n                    });\n                }\n                return;\n            }\n            const newMessage = {\n                ...messageData,\n                isOwnMessage: ((_messageData_sender = messageData.sender) === null || _messageData_sender === void 0 ? void 0 : _messageData_sender.id) === currentUserId\n            };\n            // Cập nhật chat list\n            if (messageData.chatId) {\n                requestAnimationFrame(()=>{\n                    updateChatList(newMessage, messageData.chatId);\n                });\n            }\n            // Toast thông báo kèm click handler - chỉ cho tin nhắn từ người khác\n            if (messageData.sender && messageData.content && !newMessage.isOwnMessage) {\n                const senderName = messageData.sender.username || messageData.sender.givenName || \"ai đ\\xf3\";\n                (0,react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast)((t)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        onClick: ()=>{\n                            selectChat(messageData.chatId);\n                            router.push(\"/chats\");\n                            react_hot_toast__WEBPACK_IMPORTED_MODULE_3__.toast.dismiss(t.id);\n                        },\n                        className: \"cursor-pointer\",\n                        children: [\n                            \"\\uD83D\\uDCAC \",\n                            senderName,\n                            \": \",\n                            messageData.content\n                        ]\n                    }, void 0, true, {\n                        fileName: \"F:\\\\LVTN2025\\\\social-media-app\\\\src\\\\hooks\\\\useMessageNotification.js\",\n                        lineNumber: 104,\n                        columnNumber: 13\n                    }, this), {\n                    duration: 4000,\n                    position: \"top-right\"\n                });\n            }\n            if (onMessageReceived) {\n                onMessageReceived(messageData);\n            }\n            window.dispatchEvent(new CustomEvent(\"newMessageReceived\", {\n                detail: messageData\n            }));\n        } catch (error) {\n            console.error(\"❌ Failed to process message:\", error);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // ✅ Kiểm tra userId ngay từ đầu\n        if (!userId) {\n            console.log(\"⏳ [useMessageNotification] Waiting for userId...\");\n            return;\n        }\n        console.log(\"\\uD83D\\uDE80 [useMessageNotification] Initializing for userId:\", userId);\n        let isMounted = true;\n        // === Setup socket client với singleton pattern giống useNotificationSocket ===\n        const setupConnection = async ()=>{\n            try {\n                console.log(\"\\uD83D\\uDD0C Connecting to message socket for user:\", userId);\n                const client = await (0,_utils_socket__WEBPACK_IMPORTED_MODULE_2__.getStompClient)(()=>{\n                    if (!isMounted || isSubscribedRef.current) {\n                        console.log(\"⏭️ Skipping subscription - already subscribed or unmounted\");\n                        return;\n                    }\n                    console.log(\"\\uD83D\\uDD0C Subscribing to /message/\" + userId);\n                    try {\n                        subscriptionRef.current = client.subscribeToChannel(\"/message/\".concat(userId), (message)=>{\n                            if (!isMounted) return;\n                            try {\n                                const data = JSON.parse(message.body);\n                                console.log(\"\\uD83D\\uDCE8 Message received:\", data);\n                                handleMessage(data);\n                            } catch (err) {\n                                console.error(\"❌ Kh\\xf4ng thể parse message:\", err);\n                            }\n                        });\n                        if (subscriptionRef.current) {\n                            isSubscribedRef.current = true;\n                            console.log(\"✅ Successfully subscribed to messages\");\n                        }\n                    } catch (err) {\n                        console.error(\"❌ Lỗi khi subscribe:\", err);\n                    }\n                });\n                // Nếu client đã connected và chưa subscribe\n                if ((client === null || client === void 0 ? void 0 : client.connected) && !isSubscribedRef.current) {\n                    console.log(\"\\uD83D\\uDD0C Client already connected, subscribing immediately\");\n                    try {\n                        subscriptionRef.current = client.subscribeToChannel(\"/message/\".concat(userId), (message)=>{\n                            if (!isMounted) return;\n                            try {\n                                const data = JSON.parse(message.body);\n                                console.log(\"\\uD83D\\uDCE8 Message received:\", data);\n                                handleMessage(data);\n                            } catch (err) {\n                                console.error(\"❌ Kh\\xf4ng thể parse message:\", err);\n                            }\n                        });\n                        if (subscriptionRef.current) {\n                            isSubscribedRef.current = true;\n                            console.log(\"✅ Successfully subscribed to messages\");\n                        }\n                    } catch (err) {\n                        console.error(\"❌ Lỗi khi subscribe:\", err);\n                    }\n                }\n            } catch (err) {\n                console.error(\"❌ Lỗi khi setup connection:\", err);\n            }\n        };\n        setupConnection();\n        return ()=>{\n            console.log(\"\\uD83E\\uDDF9 [useMessageNotification] Cleanup for userId:\", userId);\n            isMounted = false;\n            if (subscriptionRef.current) {\n                try {\n                    subscriptionRef.current.unsubscribe();\n                    console.log(\"\\uD83D\\uDCE4 Đ\\xe3 hủy đăng k\\xfd /message/\" + userId);\n                } catch (err) {\n                    console.warn(\"⚠️ Lỗi khi hủy đăng k\\xfd:\", err);\n                }\n                subscriptionRef.current = null;\n            }\n            isSubscribedRef.current = false;\n        };\n    }, [\n        userId\n    ]); // ✅ Chỉ depend vào userId\n    return {\n        // Có thể return các utility functions nếu cần\n        isConnected: isSubscribedRef.current,\n        userId: userId\n    };\n}\n_s(useMessageNotification, \"Hsvey3jC+EW7NGAT0ubCrmTAuws=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_5__.useRouter,\n        _store_ZustandStore__WEBPACK_IMPORTED_MODULE_4__[\"default\"]\n    ];\n});\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VNZXNzYWdlTm90aWZpY2F0aW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFFMEM7QUFDTTtBQUNSO0FBQ087QUFDSDtBQUU3QixTQUFTTSx1QkFBdUJDLE1BQU07O0lBQ25ELE1BQU1DLGtCQUFrQlAsNkNBQU1BLENBQUM7SUFDL0IsTUFBTVEsa0JBQWtCUiw2Q0FBTUEsQ0FBQztJQUMvQixNQUFNUyxTQUFTTCwwREFBU0E7SUFFeEIsZ0JBQWdCO0lBQ2hCLE1BQU0sRUFBRU0sYUFBYSxFQUFFQyxpQkFBaUIsRUFBRUMsYUFBYSxFQUFFQyxVQUFVLEVBQUUsR0FBR1YsK0RBQVdBO0lBRW5GLGtDQUFrQztJQUNsQyxNQUFNVyxpQkFBaUIsQ0FBQ0MsWUFBWUM7UUFDbENDLFFBQVFDLEdBQUcsQ0FBQyxpREFBdUNIO1FBQ25ELE1BQU0sRUFBRUksUUFBUSxFQUFFLEdBQUdoQiwyREFBV0EsQ0FBQ2lCLFFBQVE7UUFDekNILFFBQVFDLEdBQUcsQ0FBQyxrQ0FBd0JDO1FBRXBDLE1BQU1FLFlBQVlGLFNBQVNHLElBQUksQ0FBQyxDQUFDQyxJQUFNQSxFQUFFUCxNQUFNLEtBQUtBO1FBQ3BELElBQUlLLFdBQVc7WUFDYixNQUFNRyxjQUFjO2dCQUNsQixHQUFHSCxTQUFTO2dCQUNaSSxlQUFlO29CQUNiQyxJQUFJWCxXQUFXVyxFQUFFO29CQUNqQkMsU0FBU1osV0FBV1ksT0FBTztvQkFDM0JDLFFBQVFiLFdBQVdhLE1BQU07b0JBQ3pCQyxRQUFRZCxXQUFXYyxNQUFNO29CQUN6QkMsYUFBYWYsV0FBV2UsV0FBVztvQkFDbkNDLFlBQVloQixXQUFXZ0IsVUFBVTtvQkFDakNDLGFBQWFqQixXQUFXaUIsV0FBVztvQkFDbkNDLFNBQVNsQixXQUFXa0IsT0FBTyxJQUFJO2dCQUNqQztnQkFDQUMsV0FBV25CLFdBQVdhLE1BQU07Z0JBQzVCTyxxQkFDRSxDQUFDZCxVQUFVYyxtQkFBbUIsSUFBSSxLQUFNcEIsQ0FBQUEsV0FBV3FCLFlBQVksR0FBRyxJQUFJO1lBQzFFO1lBQ0EsTUFBTUMsYUFBYWxCLFNBQVNtQixNQUFNLENBQUMsQ0FBQ2YsSUFBTUEsRUFBRVAsTUFBTSxLQUFLQTtZQUN2RCxNQUFNdUIsY0FBYzttQkFBSUY7Z0JBQVliO2FBQVksQ0FBQ2dCLElBQUksQ0FDbkQsQ0FBQ0MsR0FBR0MsSUFBTSxJQUFJQyxLQUFLRCxFQUFFUixTQUFTLEVBQUVVLE9BQU8sS0FBSyxJQUFJRCxLQUFLRixFQUFFUCxTQUFTLEVBQUVVLE9BQU87WUFHM0V6QywyREFBV0EsQ0FBQzBDLFFBQVEsQ0FBQztnQkFBRTFCLFVBQVVvQixZQUFZTyxHQUFHLENBQUMsQ0FBQ0MsT0FBVTt3QkFBRSxHQUFHQSxJQUFJO29CQUFDO1lBQUk7WUFDMUU5QixRQUFRQyxHQUFHLENBQUM7UUFDZCxPQUFPO1lBQ0xELFFBQVErQixJQUFJLENBQUMsNENBQTZDLE9BQVBoQztRQUNyRDtJQUNGO0lBRUEsa0JBQWtCO0lBQ2xCLE1BQU1pQyxnQkFBZ0IsT0FBT0M7UUFDM0IsSUFBSSxDQUFDQSxhQUFhO1FBQ2xCakMsUUFBUUMsR0FBRyxDQUFDLHNDQUE0QmdDO1FBRXhDLElBQUk7Z0JBMEJjQTtZQXpCaEIsNENBQTRDO1lBQzVDLE1BQU1DLGdCQUFnQkMsYUFBYUMsT0FBTyxDQUFDO1lBRTNDLHNCQUFzQjtZQUN0QixJQUFJSCxZQUFZSSxPQUFPLEtBQUssVUFBVTtnQkFDcENwRCxzREFBS0EsQ0FBRSwwQ0FBeUI7b0JBQzlCcUQsVUFBVTtvQkFDVkMsVUFBVTtnQkFDWjtnQkFDQTtZQUNGO1lBRUEsSUFBSU4sWUFBWUksT0FBTyxLQUFLLFFBQVE7b0JBQ2ZKLHNCQUFnQ0Esc0JBQy9DQTtnQkFESixNQUFNTyxhQUFhUCxFQUFBQSx1QkFBQUEsWUFBWXJCLE1BQU0sY0FBbEJxQiwyQ0FBQUEscUJBQW9CUSxRQUFRLE9BQUlSLHVCQUFBQSxZQUFZckIsTUFBTSxjQUFsQnFCLDJDQUFBQSxxQkFBb0JTLFNBQVMsS0FBSTtnQkFDcEYsSUFBSVQsRUFBQUEsdUJBQUFBLFlBQVlyQixNQUFNLGNBQWxCcUIsMkNBQUFBLHFCQUFvQnhCLEVBQUUsTUFBS3lCLGVBQWU7b0JBQzVDakQsc0RBQUtBLENBQUMsTUFBaUIsT0FBWHVELFlBQVcsOEJBQXlCO3dCQUM5Q0YsVUFBVTt3QkFDVkMsVUFBVTtvQkFDWjtnQkFDRjtnQkFDQTtZQUNGO1lBRUEsTUFBTXpDLGFBQWE7Z0JBQ2pCLEdBQUdtQyxXQUFXO2dCQUNkZCxjQUFjYyxFQUFBQSxzQkFBQUEsWUFBWXJCLE1BQU0sY0FBbEJxQiwwQ0FBQUEsb0JBQW9CeEIsRUFBRSxNQUFLeUI7WUFDM0M7WUFFQSxxQkFBcUI7WUFDckIsSUFBSUQsWUFBWWxDLE1BQU0sRUFBRTtnQkFDdEI0QyxzQkFBc0I7b0JBQ3BCOUMsZUFBZUMsWUFBWW1DLFlBQVlsQyxNQUFNO2dCQUMvQztZQUNGO1lBRUEscUVBQXFFO1lBQ3JFLElBQ0VrQyxZQUFZckIsTUFBTSxJQUNsQnFCLFlBQVl2QixPQUFPLElBQ25CLENBQUNaLFdBQVdxQixZQUFZLEVBQ3hCO2dCQUNBLE1BQU1xQixhQUFhUCxZQUFZckIsTUFBTSxDQUFDNkIsUUFBUSxJQUFJUixZQUFZckIsTUFBTSxDQUFDOEIsU0FBUyxJQUFJO2dCQUVsRnpELHNEQUFLQSxDQUNILENBQUMyRCxrQkFDQyw4REFBQ0M7d0JBQ0NDLFNBQVM7NEJBQ1BsRCxXQUFXcUMsWUFBWWxDLE1BQU07NEJBQzdCUCxPQUFPdUQsSUFBSSxDQUFDOzRCQUNaOUQsa0RBQUtBLENBQUMrRCxPQUFPLENBQUNKLEVBQUVuQyxFQUFFO3dCQUNwQjt3QkFDQXdDLFdBQVU7OzRCQUNYOzRCQUNLVDs0QkFBVzs0QkFBR1AsWUFBWXZCLE9BQU87Ozs7Ozs4QkFHekM7b0JBQ0U0QixVQUFVO29CQUNWQyxVQUFVO2dCQUNaO1lBRUo7WUFFQSxJQUFJN0MsbUJBQW1CO2dCQUNyQkEsa0JBQWtCdUM7WUFDcEI7WUFFQWlCLE9BQU9DLGFBQWEsQ0FDbEIsSUFBSUMsWUFBWSxzQkFBc0I7Z0JBQ3BDQyxRQUFRcEI7WUFDVjtRQUVKLEVBQUUsT0FBT3FCLE9BQU87WUFDZHRELFFBQVFzRCxLQUFLLENBQUMsZ0NBQWdDQTtRQUNoRDtJQUNGO0lBRUF4RSxnREFBU0EsQ0FBQztRQUNSLGdDQUFnQztRQUNoQyxJQUFJLENBQUNPLFFBQVE7WUFDWFcsUUFBUUMsR0FBRyxDQUFDO1lBQ1o7UUFDRjtRQUVBRCxRQUFRQyxHQUFHLENBQUMsa0VBQXdEWjtRQUVwRSxJQUFJa0UsWUFBWTtRQUVoQixnRkFBZ0Y7UUFDaEYsTUFBTUMsa0JBQWtCO1lBQ3RCLElBQUk7Z0JBQ0Z4RCxRQUFRQyxHQUFHLENBQUMsdURBQTZDWjtnQkFFekQsTUFBTW9FLFNBQVMsTUFBTXpFLDZEQUFjQSxDQUFDO29CQUNsQyxJQUFJLENBQUN1RSxhQUFhaEUsZ0JBQWdCbUUsT0FBTyxFQUFFO3dCQUN6QzFELFFBQVFDLEdBQUcsQ0FBQzt3QkFDWjtvQkFDRjtvQkFFQUQsUUFBUUMsR0FBRyxDQUFDLDBDQUFnQ1o7b0JBQzVDLElBQUk7d0JBQ0ZDLGdCQUFnQm9FLE9BQU8sR0FBR0QsT0FBT0Usa0JBQWtCLENBQ2pELFlBQW1CLE9BQVB0RSxTQUNaLENBQUN1RTs0QkFDQyxJQUFJLENBQUNMLFdBQVc7NEJBQ2hCLElBQUk7Z0NBQ0YsTUFBTU0sT0FBT0MsS0FBS0MsS0FBSyxDQUFDSCxRQUFRSSxJQUFJO2dDQUNwQ2hFLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBd0I0RDtnQ0FDcEM3QixjQUFjNkI7NEJBQ2hCLEVBQUUsT0FBT0ksS0FBSztnQ0FDWmpFLFFBQVFzRCxLQUFLLENBQUMsaUNBQThCVzs0QkFDOUM7d0JBQ0Y7d0JBR0YsSUFBSTNFLGdCQUFnQm9FLE9BQU8sRUFBRTs0QkFDM0JuRSxnQkFBZ0JtRSxPQUFPLEdBQUc7NEJBQzFCMUQsUUFBUUMsR0FBRyxDQUFDO3dCQUNkO29CQUNGLEVBQUUsT0FBT2dFLEtBQUs7d0JBQ1pqRSxRQUFRc0QsS0FBSyxDQUFDLHdCQUF3Qlc7b0JBQ3hDO2dCQUNGO2dCQUVBLDRDQUE0QztnQkFDNUMsSUFBSVIsQ0FBQUEsbUJBQUFBLDZCQUFBQSxPQUFRUyxTQUFTLEtBQUksQ0FBQzNFLGdCQUFnQm1FLE9BQU8sRUFBRTtvQkFDakQxRCxRQUFRQyxHQUFHLENBQUM7b0JBQ1osSUFBSTt3QkFDRlgsZ0JBQWdCb0UsT0FBTyxHQUFHRCxPQUFPRSxrQkFBa0IsQ0FDakQsWUFBbUIsT0FBUHRFLFNBQ1osQ0FBQ3VFOzRCQUNDLElBQUksQ0FBQ0wsV0FBVzs0QkFDaEIsSUFBSTtnQ0FDRixNQUFNTSxPQUFPQyxLQUFLQyxLQUFLLENBQUNILFFBQVFJLElBQUk7Z0NBQ3BDaEUsUUFBUUMsR0FBRyxDQUFDLGtDQUF3QjREO2dDQUNwQzdCLGNBQWM2Qjs0QkFDaEIsRUFBRSxPQUFPSSxLQUFLO2dDQUNaakUsUUFBUXNELEtBQUssQ0FBQyxpQ0FBOEJXOzRCQUM5Qzt3QkFDRjt3QkFHRixJQUFJM0UsZ0JBQWdCb0UsT0FBTyxFQUFFOzRCQUMzQm5FLGdCQUFnQm1FLE9BQU8sR0FBRzs0QkFDMUIxRCxRQUFRQyxHQUFHLENBQUM7d0JBQ2Q7b0JBQ0YsRUFBRSxPQUFPZ0UsS0FBSzt3QkFDWmpFLFFBQVFzRCxLQUFLLENBQUMsd0JBQXdCVztvQkFDeEM7Z0JBQ0Y7WUFFRixFQUFFLE9BQU9BLEtBQUs7Z0JBQ1pqRSxRQUFRc0QsS0FBSyxDQUFDLCtCQUErQlc7WUFDL0M7UUFDRjtRQUVBVDtRQUVBLE9BQU87WUFDTHhELFFBQVFDLEdBQUcsQ0FBQyw2REFBbURaO1lBQy9Ea0UsWUFBWTtZQUVaLElBQUlqRSxnQkFBZ0JvRSxPQUFPLEVBQUU7Z0JBQzNCLElBQUk7b0JBQ0ZwRSxnQkFBZ0JvRSxPQUFPLENBQUNTLFdBQVc7b0JBQ25DbkUsUUFBUUMsR0FBRyxDQUFDLGdEQUFnQ1o7Z0JBQzlDLEVBQUUsT0FBTzRFLEtBQUs7b0JBQ1pqRSxRQUFRK0IsSUFBSSxDQUFDLDhCQUEyQmtDO2dCQUMxQztnQkFDQTNFLGdCQUFnQm9FLE9BQU8sR0FBRztZQUM1QjtZQUVBbkUsZ0JBQWdCbUUsT0FBTyxHQUFHO1FBQzVCO0lBQ0YsR0FBRztRQUFDckU7S0FBTyxHQUFHLDBCQUEwQjtJQUV4QyxPQUFPO1FBQ0wsOENBQThDO1FBQzlDK0UsYUFBYTdFLGdCQUFnQm1FLE9BQU87UUFDcENyRSxRQUFRQTtJQUNWO0FBQ0Y7R0F2T3dCRDs7UUFHUEQsc0RBQVNBO1FBR2dERCwyREFBV0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2hvb2tzL3VzZU1lc3NhZ2VOb3RpZmljYXRpb24uanM/MzM2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcclxuXHJcbmltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSBcInJlYWN0XCI7XHJcbmltcG9ydCB7IGdldFN0b21wQ2xpZW50IH0gZnJvbSBcIkAvdXRpbHMvc29ja2V0XCI7XHJcbmltcG9ydCB7IHRvYXN0IH0gZnJvbSBcInJlYWN0LWhvdC10b2FzdFwiO1xyXG5pbXBvcnQgdXNlQXBwU3RvcmUgZnJvbSBcIkAvc3RvcmUvWnVzdGFuZFN0b3JlXCI7XHJcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L25hdmlnYXRpb25cIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZU1lc3NhZ2VOb3RpZmljYXRpb24odXNlcklkKSB7XHJcbiAgY29uc3Qgc3Vic2NyaXB0aW9uUmVmID0gdXNlUmVmKG51bGwpO1xyXG4gIGNvbnN0IGlzU3Vic2NyaWJlZFJlZiA9IHVzZVJlZihmYWxzZSk7XHJcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XHJcblxyXG4gIC8vIFN0b3JlIGFjdGlvbnNcclxuICBjb25zdCB7IGZldGNoQ2hhdExpc3QsIG9uTWVzc2FnZVJlY2VpdmVkLCBvbkNoYXRDcmVhdGVkLCBzZWxlY3RDaGF0IH0gPSB1c2VBcHBTdG9yZSgpO1xyXG5cclxuICAvLyBIw6BtIGhlbHBlciDEkeG7gyBj4bqtcCBuaOG6rXQgY2hhdExpc3RcclxuICBjb25zdCB1cGRhdGVDaGF0TGlzdCA9IChuZXdNZXNzYWdlLCBjaGF0SWQpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwi8J+UhCBQcm9jZXNzaW5nIG1lc3NhZ2UgZm9yIGNoYXRMaXN0OlwiLCBuZXdNZXNzYWdlKTtcclxuICAgIGNvbnN0IHsgY2hhdExpc3QgfSA9IHVzZUFwcFN0b3JlLmdldFN0YXRlKCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIvCfk5wgQ3VycmVudCBjaGF0TGlzdDpcIiwgY2hhdExpc3QpO1xyXG5cclxuICAgIGNvbnN0IGZvdW5kQ2hhdCA9IGNoYXRMaXN0LmZpbmQoKGMpID0+IGMuY2hhdElkID09PSBjaGF0SWQpO1xyXG4gICAgaWYgKGZvdW5kQ2hhdCkge1xyXG4gICAgICBjb25zdCB1cGRhdGVkQ2hhdCA9IHtcclxuICAgICAgICAuLi5mb3VuZENoYXQsXHJcbiAgICAgICAgbGF0ZXN0TWVzc2FnZToge1xyXG4gICAgICAgICAgaWQ6IG5ld01lc3NhZ2UuaWQsXHJcbiAgICAgICAgICBjb250ZW50OiBuZXdNZXNzYWdlLmNvbnRlbnQsXHJcbiAgICAgICAgICBzZW50QXQ6IG5ld01lc3NhZ2Uuc2VudEF0LFxyXG4gICAgICAgICAgc2VuZGVyOiBuZXdNZXNzYWdlLnNlbmRlcixcclxuICAgICAgICAgIG1lc3NhZ2VUeXBlOiBuZXdNZXNzYWdlLm1lc3NhZ2VUeXBlLFxyXG4gICAgICAgICAgYXR0YWNobWVudDogbmV3TWVzc2FnZS5hdHRhY2htZW50LFxyXG4gICAgICAgICAgYXR0YWNobWVudHM6IG5ld01lc3NhZ2UuYXR0YWNobWVudHMsXHJcbiAgICAgICAgICBkZWxldGVkOiBuZXdNZXNzYWdlLmRlbGV0ZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB1cGRhdGVkQXQ6IG5ld01lc3NhZ2Uuc2VudEF0LFxyXG4gICAgICAgIG5vdFJlYWRNZXNzYWdlQ291bnQ6XHJcbiAgICAgICAgICAoZm91bmRDaGF0Lm5vdFJlYWRNZXNzYWdlQ291bnQgfHwgMCkgKyAobmV3TWVzc2FnZS5pc093bk1lc3NhZ2UgPyAwIDogMSksXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IG90aGVyQ2hhdHMgPSBjaGF0TGlzdC5maWx0ZXIoKGMpID0+IGMuY2hhdElkICE9PSBjaGF0SWQpO1xyXG4gICAgICBjb25zdCBuZXdDaGF0TGlzdCA9IFsuLi5vdGhlckNoYXRzLCB1cGRhdGVkQ2hhdF0uc29ydChcclxuICAgICAgICAoYSwgYikgPT4gbmV3IERhdGUoYi51cGRhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEudXBkYXRlZEF0KS5nZXRUaW1lKClcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHVzZUFwcFN0b3JlLnNldFN0YXRlKHsgY2hhdExpc3Q6IG5ld0NoYXRMaXN0Lm1hcCgoY2hhdCkgPT4gKHsgLi4uY2hhdCB9KSkgfSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwi4pyFIENoYXRMaXN0IHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIEtow7RuZyB0w6xtIHRo4bqleSBjaGF0IHbhu5tpIGNoYXRJZDogJHtjaGF0SWR9YCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy8gTWVzc2FnZSBoYW5kbGVyXHJcbiAgY29uc3QgaGFuZGxlTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlRGF0YSkgPT4ge1xyXG4gICAgaWYgKCFtZXNzYWdlRGF0YSkgcmV0dXJuO1xyXG4gICAgY29uc29sZS5sb2coXCLwn5OoIE5ldyBtZXNzYWdlIHJlY2VpdmVkOlwiLCBtZXNzYWdlRGF0YSk7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gTOG6pXkgY3VycmVudFVzZXJJZCB04burIGxvY2FsU3RvcmFnZSBraGkgY+G6p25cclxuICAgICAgY29uc3QgY3VycmVudFVzZXJJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcklkXCIpO1xyXG5cclxuICAgICAgLy8gQ29tbWFuZCB44butIGzDvSByacOqbmdcclxuICAgICAgaWYgKG1lc3NhZ2VEYXRhLmNvbW1hbmQgPT09IFwiREVMRVRFXCIpIHtcclxuICAgICAgICB0b2FzdChg8J+Xke+4jyBUaW4gbmjhuq9uIMSRw6MgYuG7iyB4w7NhYCwge1xyXG4gICAgICAgICAgZHVyYXRpb246IDMwMDAsXHJcbiAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChtZXNzYWdlRGF0YS5jb21tYW5kID09PSBcIkVESVRcIikge1xyXG4gICAgICAgIGNvbnN0IHNlbmRlck5hbWUgPSBtZXNzYWdlRGF0YS5zZW5kZXI/LnVzZXJuYW1lIHx8IG1lc3NhZ2VEYXRhLnNlbmRlcj8uZ2l2ZW5OYW1lIHx8IFwiYWkgxJHDs1wiO1xyXG4gICAgICAgIGlmIChtZXNzYWdlRGF0YS5zZW5kZXI/LmlkICE9PSBjdXJyZW50VXNlcklkKSB7XHJcbiAgICAgICAgICB0b2FzdChg4pyP77iPICR7c2VuZGVyTmFtZX0gxJHDoyBjaOG7iW5oIHPhu61hIHRpbiBuaOG6r25gLCB7XHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwLFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AtcmlnaHRcIixcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5ld01lc3NhZ2UgPSB7XHJcbiAgICAgICAgLi4ubWVzc2FnZURhdGEsXHJcbiAgICAgICAgaXNPd25NZXNzYWdlOiBtZXNzYWdlRGF0YS5zZW5kZXI/LmlkID09PSBjdXJyZW50VXNlcklkLFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy8gQ+G6rXAgbmjhuq10IGNoYXQgbGlzdFxyXG4gICAgICBpZiAobWVzc2FnZURhdGEuY2hhdElkKSB7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgIHVwZGF0ZUNoYXRMaXN0KG5ld01lc3NhZ2UsIG1lc3NhZ2VEYXRhLmNoYXRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFRvYXN0IHRow7RuZyBiw6FvIGvDqG0gY2xpY2sgaGFuZGxlciAtIGNo4buJIGNobyB0aW4gbmjhuq9uIHThu6sgbmfGsOG7nWkga2jDoWNcclxuICAgICAgaWYgKFxyXG4gICAgICAgIG1lc3NhZ2VEYXRhLnNlbmRlciAmJlxyXG4gICAgICAgIG1lc3NhZ2VEYXRhLmNvbnRlbnQgJiZcclxuICAgICAgICAhbmV3TWVzc2FnZS5pc093bk1lc3NhZ2VcclxuICAgICAgKSB7XHJcbiAgICAgICAgY29uc3Qgc2VuZGVyTmFtZSA9IG1lc3NhZ2VEYXRhLnNlbmRlci51c2VybmFtZSB8fCBtZXNzYWdlRGF0YS5zZW5kZXIuZ2l2ZW5OYW1lIHx8IFwiYWkgxJHDs1wiO1xyXG5cclxuICAgICAgICB0b2FzdChcclxuICAgICAgICAgICh0KSA9PiAoXHJcbiAgICAgICAgICAgIDxkaXZcclxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RDaGF0KG1lc3NhZ2VEYXRhLmNoYXRJZCk7XHJcbiAgICAgICAgICAgICAgICByb3V0ZXIucHVzaChcIi9jaGF0c1wiKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0LmRpc21pc3ModC5pZCk7XHJcbiAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICBjbGFzc05hbWU9XCJjdXJzb3ItcG9pbnRlclwiXHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICDwn5KsIHtzZW5kZXJOYW1lfToge21lc3NhZ2VEYXRhLmNvbnRlbnR9XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgKSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgZHVyYXRpb246IDQwMDAsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcInRvcC1yaWdodFwiLFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChvbk1lc3NhZ2VSZWNlaXZlZCkge1xyXG4gICAgICAgIG9uTWVzc2FnZVJlY2VpdmVkKG1lc3NhZ2VEYXRhKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQoXHJcbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50KFwibmV3TWVzc2FnZVJlY2VpdmVkXCIsIHtcclxuICAgICAgICAgIGRldGFpbDogbWVzc2FnZURhdGEsXHJcbiAgICAgICAgfSlcclxuICAgICAgKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgRmFpbGVkIHRvIHByb2Nlc3MgbWVzc2FnZTpcIiwgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICAvLyDinIUgS2nhu4NtIHRyYSB1c2VySWQgbmdheSB04burIMSR4bqndVxyXG4gICAgaWYgKCF1c2VySWQpIHtcclxuICAgICAgY29uc29sZS5sb2coXCLij7MgW3VzZU1lc3NhZ2VOb3RpZmljYXRpb25dIFdhaXRpbmcgZm9yIHVzZXJJZC4uLlwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKFwi8J+agCBbdXNlTWVzc2FnZU5vdGlmaWNhdGlvbl0gSW5pdGlhbGl6aW5nIGZvciB1c2VySWQ6XCIsIHVzZXJJZCk7XHJcbiAgICBcclxuICAgIGxldCBpc01vdW50ZWQgPSB0cnVlO1xyXG5cclxuICAgIC8vID09PSBTZXR1cCBzb2NrZXQgY2xpZW50IHbhu5tpIHNpbmdsZXRvbiBwYXR0ZXJuIGdp4buRbmcgdXNlTm90aWZpY2F0aW9uU29ja2V0ID09PVxyXG4gICAgY29uc3Qgc2V0dXBDb25uZWN0aW9uID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjCBDb25uZWN0aW5nIHRvIG1lc3NhZ2Ugc29ja2V0IGZvciB1c2VyOlwiLCB1c2VySWQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGdldFN0b21wQ2xpZW50KCgpID0+IHtcclxuICAgICAgICAgIGlmICghaXNNb3VudGVkIHx8IGlzU3Vic2NyaWJlZFJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4o+t77iPIFNraXBwaW5nIHN1YnNjcmlwdGlvbiAtIGFscmVhZHkgc3Vic2NyaWJlZCBvciB1bm1vdW50ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIvCflIwgU3Vic2NyaWJpbmcgdG8gL21lc3NhZ2UvXCIgKyB1c2VySWQpO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uUmVmLmN1cnJlbnQgPSBjbGllbnQuc3Vic2NyaWJlVG9DaGFubmVsKFxyXG4gICAgICAgICAgICAgIGAvbWVzc2FnZS8ke3VzZXJJZH1gLFxyXG4gICAgICAgICAgICAgIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTW91bnRlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZS5ib2R5KTtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5OoIE1lc3NhZ2UgcmVjZWl2ZWQ6XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICBoYW5kbGVNZXNzYWdlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgS2jDtG5nIHRo4buDIHBhcnNlIG1lc3NhZ2U6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgaXNTdWJzY3JpYmVkUmVmLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFN1Y2Nlc3NmdWxseSBzdWJzY3JpYmVkIHRvIG1lc3NhZ2VzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBM4buXaSBraGkgc3Vic2NyaWJlOlwiLCBlcnIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBO4bq/dSBjbGllbnQgxJHDoyBjb25uZWN0ZWQgdsOgIGNoxrBhIHN1YnNjcmliZVxyXG4gICAgICAgIGlmIChjbGllbnQ/LmNvbm5lY3RlZCAmJiAhaXNTdWJzY3JpYmVkUmVmLmN1cnJlbnQpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwi8J+UjCBDbGllbnQgYWxyZWFkeSBjb25uZWN0ZWQsIHN1YnNjcmliaW5nIGltbWVkaWF0ZWx5XCIpO1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uUmVmLmN1cnJlbnQgPSBjbGllbnQuc3Vic2NyaWJlVG9DaGFubmVsKFxyXG4gICAgICAgICAgICAgIGAvbWVzc2FnZS8ke3VzZXJJZH1gLFxyXG4gICAgICAgICAgICAgIChtZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzTW91bnRlZCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobWVzc2FnZS5ib2R5KTtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLwn5OoIE1lc3NhZ2UgcmVjZWl2ZWQ6XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICBoYW5kbGVNZXNzYWdlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgS2jDtG5nIHRo4buDIHBhcnNlIG1lc3NhZ2U6XCIsIGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgaXNTdWJzY3JpYmVkUmVmLmN1cnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi4pyFIFN1Y2Nlc3NmdWxseSBzdWJzY3JpYmVkIHRvIG1lc3NhZ2VzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBM4buXaSBraGkgc3Vic2NyaWJlOlwiLCBlcnIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgTOG7l2kga2hpIHNldHVwIGNvbm5lY3Rpb246XCIsIGVycik7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgc2V0dXBDb25uZWN0aW9uKCk7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coXCLwn6e5IFt1c2VNZXNzYWdlTm90aWZpY2F0aW9uXSBDbGVhbnVwIGZvciB1c2VySWQ6XCIsIHVzZXJJZCk7XHJcbiAgICAgIGlzTW91bnRlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHN1YnNjcmlwdGlvblJlZi5jdXJyZW50KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHN1YnNjcmlwdGlvblJlZi5jdXJyZW50LnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIvCfk6QgxJDDoyBo4buneSDEkcSDbmcga8O9IC9tZXNzYWdlL1wiICsgdXNlcklkKTtcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBM4buXaSBraGkgaOG7p3kgxJHEg25nIGvDvTpcIiwgZXJyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3Vic2NyaXB0aW9uUmVmLmN1cnJlbnQgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBpc1N1YnNjcmliZWRSZWYuY3VycmVudCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICB9LCBbdXNlcklkXSk7IC8vIOKchSBDaOG7iSBkZXBlbmQgdsOgbyB1c2VySWRcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIC8vIEPDsyB0aOG7gyByZXR1cm4gY8OhYyB1dGlsaXR5IGZ1bmN0aW9ucyBu4bq/dSBj4bqnblxyXG4gICAgaXNDb25uZWN0ZWQ6IGlzU3Vic2NyaWJlZFJlZi5jdXJyZW50LFxyXG4gICAgdXNlcklkOiB1c2VySWQsXHJcbiAgfTtcclxufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJnZXRTdG9tcENsaWVudCIsInRvYXN0IiwidXNlQXBwU3RvcmUiLCJ1c2VSb3V0ZXIiLCJ1c2VNZXNzYWdlTm90aWZpY2F0aW9uIiwidXNlcklkIiwic3Vic2NyaXB0aW9uUmVmIiwiaXNTdWJzY3JpYmVkUmVmIiwicm91dGVyIiwiZmV0Y2hDaGF0TGlzdCIsIm9uTWVzc2FnZVJlY2VpdmVkIiwib25DaGF0Q3JlYXRlZCIsInNlbGVjdENoYXQiLCJ1cGRhdGVDaGF0TGlzdCIsIm5ld01lc3NhZ2UiLCJjaGF0SWQiLCJjb25zb2xlIiwibG9nIiwiY2hhdExpc3QiLCJnZXRTdGF0ZSIsImZvdW5kQ2hhdCIsImZpbmQiLCJjIiwidXBkYXRlZENoYXQiLCJsYXRlc3RNZXNzYWdlIiwiaWQiLCJjb250ZW50Iiwic2VudEF0Iiwic2VuZGVyIiwibWVzc2FnZVR5cGUiLCJhdHRhY2htZW50IiwiYXR0YWNobWVudHMiLCJkZWxldGVkIiwidXBkYXRlZEF0Iiwibm90UmVhZE1lc3NhZ2VDb3VudCIsImlzT3duTWVzc2FnZSIsIm90aGVyQ2hhdHMiLCJmaWx0ZXIiLCJuZXdDaGF0TGlzdCIsInNvcnQiLCJhIiwiYiIsIkRhdGUiLCJnZXRUaW1lIiwic2V0U3RhdGUiLCJtYXAiLCJjaGF0Iiwid2FybiIsImhhbmRsZU1lc3NhZ2UiLCJtZXNzYWdlRGF0YSIsImN1cnJlbnRVc2VySWQiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiY29tbWFuZCIsImR1cmF0aW9uIiwicG9zaXRpb24iLCJzZW5kZXJOYW1lIiwidXNlcm5hbWUiLCJnaXZlbk5hbWUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ0IiwiZGl2Iiwib25DbGljayIsInB1c2giLCJkaXNtaXNzIiwiY2xhc3NOYW1lIiwid2luZG93IiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiZGV0YWlsIiwiZXJyb3IiLCJpc01vdW50ZWQiLCJzZXR1cENvbm5lY3Rpb24iLCJjbGllbnQiLCJjdXJyZW50Iiwic3Vic2NyaWJlVG9DaGFubmVsIiwibWVzc2FnZSIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJib2R5IiwiZXJyIiwiY29ubmVjdGVkIiwidW5zdWJzY3JpYmUiLCJpc0Nvbm5lY3RlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useMessageNotification.js\n"));

/***/ })

});